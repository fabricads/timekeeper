<h1>Associate consultants to a project and task</h1>

<div ng-controller="project_associate_consultants" ng-cloak>

    <div class="alert alert-warning" ng-show="error_msg != null">
        <span class="pficon-layered">
          <span class="pficon pficon-warning-triangle"></span>
          <span class="pficon pficon-warning-exclamation"></span>
        </span> 
            {{error_msg.error}}
    </div>
    
    <div class="alert alert-success" ng-show="saved">
      <span class="pficon pficon-ok"></span>
            Project {{prj_name}} was successfully saved.
    </div>

<form class="form-horizontal" name="form">
    <div class="form-group" ng-class="{'has-error': form.name.$invalid}">
        <label for="prj_name" class="col-md-2 control-label">Project name</label>
        <div class="col-md-6">
            <label>{{project.name}}</label>
        </div>
    </div>
    <div class="form-group">
        <label for="prj_desc" class="col-md-2 control-label">Consultant</label>
        <div class="col-md-2">
            <input class="form-control" autocomplete="off" type="text" placeholder="Type name here" ng-model="temp_consultant" 
                uib-typeahead="c as c.name for c in consultants | filter:$viewValue" typeahead-editable="false" 
                typeahead-no-results="noResults"/>
            
            <span ng-if="noResults" uib-dropdown uib-dropdown-toggle auto-close="disabled" is-open="true">
              <ul class="uib-dropdown-menu" >
                <li><a href>no results</a></li>
              </ul>
            </span>
            
        </div>
    </div>

    <div class="form-group" >
        <label for="prj_consultants" class="col-md-2 control-label">Tasks</label>
        <div class="col-md-2">
            <select class="form-control" ng-model="temp_task" ng-options="task.name for task in tasks track by task.id">
            </select>
        </div>
        <button type="button" class="btn btn-primary" ng-click="add_consultant()">Add consultant</button>
    </div>
    
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <div class="com-md-10">
                <label>Consultants</label>
                <div class="alert alert-info" ng-show="selected_consultants.length == 0">
                    <span class="pficon pficon-info"></span> There is no consultants to list
                </div>
                <div class="table-responsive" ng-hide="selected_consultants.length == 0">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="c in selected_consultants">
                                <td style="vertical-align: middle;">{{c.name}}</td>
                                <td style="vertical-align: middle;">
                                    <a class="btn btn-danger" ng-click="remove_consultant(c.id)">Delete</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <button type="submit" class="btn btn-primary" ng-click="project_submit(project)" ng-disabled="saved || form.$invalid">Save</button>
        </div>
    </div>
</form>

</div>

<a class="btn btn-default" href="#/projects">Go to main project list page.</a>
